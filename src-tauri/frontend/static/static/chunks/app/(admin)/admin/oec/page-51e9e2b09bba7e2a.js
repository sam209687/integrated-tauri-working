(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6193],{13770:(e,t,a)=>{"use strict";a.d(t,{DataTable:()=>c});var r=a(95155),s=a(12115),n=a(36268),o=a(11032),d=a(85127),i=a(62523),l=a(30285);function c(e){var t,a,c;let{columns:u,data:m,searchKey:h}=e,[v,f]=(0,s.useState)([]),[p,x]=(0,s.useState)([]),g=(0,n.N4)({data:m,columns:u,getCoreRowModel:(0,o.HT)(),getPaginationRowModel:(0,o.kW)(),onSortingChange:f,getSortedRowModel:(0,o.h5)(),onColumnFiltersChange:x,getFilteredRowModel:(0,o.hM)(),state:{sorting:v,columnFilters:p}});return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center py-4",children:(0,r.jsx)(i.p,{placeholder:"Search by ".concat(h,"..."),value:null!=(c=null==(t=g.getColumn(h))?void 0:t.getFilterValue())?c:"",onChange:e=>{var t;return null==(t=g.getColumn(h))?void 0:t.setFilterValue(e.target.value)},className:"max-w-sm"})}),(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(d.XI,{children:[(0,r.jsx)(d.A0,{children:g.getHeaderGroups().map(e=>(0,r.jsx)(d.Hj,{children:e.headers.map(e=>(0,r.jsx)(d.nd,{children:e.isPlaceholder?null:(0,n.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,r.jsx)(d.BF,{children:(null==(a=g.getRowModel().rows)?void 0:a.length)?g.getRowModel().rows.map(e=>(0,r.jsx)(d.Hj,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,r.jsx)(d.nA,{children:(0,n.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,r.jsx)(d.Hj,{children:(0,r.jsx)(d.nA,{colSpan:u.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>g.previousPage(),disabled:!g.getCanPreviousPage(),children:"Previous"}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>g.nextPage(),disabled:!g.getCanNextPage(),children:"Next"})]})]})}},14636:(e,t,a)=>{"use strict";a.d(t,{AM:()=>o,Wv:()=>d,hl:()=>i});var r=a(95155);a(12115);var s=a(20547),n=a(59434);function o(e){let{...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"popover",...t})}function d(e){let{...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"popover-trigger",...t})}function i(e){let{className:t,align:a="center",sideOffset:o=4,...d}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsx)(s.UC,{"data-slot":"popover-content",align:a,sideOffset:o,className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...d})})}},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,r:()=>d});var r=a(95155);a(12115);var s=a(99708),n=a(74466),o=a(59434);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:a,size:n,asChild:i=!1,...l}=e,c=i?s.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,o.cn)(d({variant:a,size:n,className:t})),...l})}},41049:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var r=a(65453),s=a(34477);let n=(0,s.createServerReference)("7f3a36380c0100b75354dc7f37b8c24ca15bc6cfdc",s.callServer,void 0,s.findSourceMapURL,"getOecs"),o=(0,s.createServerReference)("7ffce4cca7f46d8656a217fbc23e9a52fdf936f2b1",s.callServer,void 0,s.findSourceMapURL,"getProductsForOec");var d=a(56671);let i=(0,r.v)(e=>({oecs:[],products:[],isLoading:!1,fetchOecs:async()=>{e({isLoading:!0});try{let t=await n();t.success?e({oecs:t.data,isLoading:!1}):(d.oR.error(t.message||"Failed to fetch OECs."),e({isLoading:!1}))}catch(t){console.error("Failed to fetch OECs:",t),d.oR.error("Failed to fetch OECs due to an unexpected error."),e({isLoading:!1})}},fetchProducts:async()=>{e({isLoading:!0});try{let t=await o();t.success?e({products:t.data,isLoading:!1}):(d.oR.error(t.message||"Failed to fetch products."),e({isLoading:!1}))}catch(t){console.error("Failed to fetch products:",t),d.oR.error("Failed to fetch products due to an unexpected error."),e({isLoading:!1})}}}))},41413:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,6874,23)),Promise.resolve().then(a.bind(a,51869))},44838:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>i,_2:()=>l,lp:()=>c,mB:()=>u,rI:()=>o,ty:()=>d});var r=a(95155);a(12115);var s=a(9449),n=a(59434);function o(e){let{...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"dropdown-menu",...t})}function d(e){let{...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"dropdown-menu-trigger",...t})}function i(e){let{className:t,sideOffset:a=4,...o}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsx)(s.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,n.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...o})})}function l(e){let{className:t,inset:a,variant:o="default",...d}=e;return(0,r.jsx)(s.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":o,className:(0,n.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...d})}function c(e){let{className:t,inset:a,...o}=e;return(0,r.jsx)(s.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,n.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...o})}function u(e){let{className:t,...a}=e;return(0,r.jsx)(s.wv,{"data-slot":"dropdown-menu-separator",className:(0,n.cn)("bg-border -mx-1 my-1 h-px",t),...a})}},51869:(e,t,a)=>{"use strict";a.d(t,{OecTable:()=>w});var r=a(95155),s=a(12115),n=a(13770),o=a(51154),d=a(5623),i=a(21492),l=a(30285),c=a(44838),u=a(14636),m=a(56671),h=a(34477);let v=(0,h.createServerReference)("7ffd6c08afd15ab3f2c681391350c80896bc8a2b1a",h.callServer,void 0,h.findSourceMapURL,"deleteOec");var f=a(35695),p=a(6874),x=a.n(p);let g=e=>{let{oec:t}=e,a=(0,f.useRouter)(),[n,i]=(0,s.useState)(!1),h=async()=>{i(!0);let e=await v(t._id);e.success?(m.oR.success("OEC deleted successfully!"),a.refresh()):m.oR.error(e.message||"Failed to delete OEC."),i(!1)};return(0,r.jsxs)(c.rI,{children:[(0,r.jsx)(c.ty,{asChild:!0,children:(0,r.jsxs)(l.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,r.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,r.jsx)(d.A,{className:"h-4 w-4"})]})}),(0,r.jsxs)(c.SQ,{align:"end",children:[(0,r.jsx)(c.lp,{children:"Actions"}),(0,r.jsx)(c._2,{asChild:!0,children:(0,r.jsx)(x(),{href:"/admin/oec/edit/".concat(t._id),children:"Edit"})}),(0,r.jsx)(c.mB,{}),(0,r.jsxs)(u.AM,{children:[(0,r.jsx)(u.Wv,{asChild:!0,children:(0,r.jsx)(c._2,{onSelect:e=>e.preventDefault(),children:"Delete"})}),(0,r.jsx)(u.hl,{className:"w-52",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-sm font-semibold",children:"Are you sure?"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"This action cannot be undone."}),(0,r.jsx)(l.$,{onClick:h,disabled:n,size:"sm",className:"mt-3 w-full",variant:"destructive",children:n?(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4 animate-spin"}):"Delete"})]})})]})]})]})},b=[{accessorKey:"SNo",header:"S/No",cell:e=>{let{row:t}=e;return(0,r.jsx)("span",{children:t.index+1})}},{id:"productName",accessorKey:"product.productName",header:e=>{let{column:t}=e;return(0,r.jsxs)(l.$,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),children:["Product Name",(0,r.jsx)(i.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e,a=t.original.product;return(0,r.jsx)("span",{children:null==a?void 0:a.productName})}},{accessorKey:"product.productCode",header:"Product Code",cell:e=>{let{row:t}=e,a=t.original.product;return(0,r.jsx)("span",{children:null==a?void 0:a.productCode})}},{accessorKey:"oilExpellingCharges",header:"OEC (â‚¹)"},{id:"actions",cell:e=>{let{row:t}=e;return(0,r.jsx)(g,{oec:t.original})}}];var j=a(41049);function w(){let{oecs:e,isLoading:t,fetchOecs:a}=(0,j.E)();return((0,s.useEffect)(()=>{a()},[a]),t)?(0,r.jsx)("div",{className:"flex justify-center items-center h-48",children:(0,r.jsx)(o.A,{className:"h-8 w-8 animate-spin"})}):(0,r.jsx)(n.DataTable,{columns:b,data:e,searchKey:"productName"})}},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(52596),s=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(95155);a(12115);var s=a(59434);function n(e){let{className:t,type:a,...n}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}},85127:(e,t,a)=>{"use strict";a.d(t,{A0:()=>o,BF:()=>d,Hj:()=>i,XI:()=>n,nA:()=>c,nd:()=>l});var r=a(95155);a(12115);var s=a(59434);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",t),...a})})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 *:[[role=checkbox]]:translate-y-0.5",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 *:[[role=checkbox]]:translate-y-0.5",t),...a})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2848,6671,7849,5152,2898,6874,8034,460,9449,6480,8441,1684,7358],()=>t(41413)),_N_E=e.O()}]);