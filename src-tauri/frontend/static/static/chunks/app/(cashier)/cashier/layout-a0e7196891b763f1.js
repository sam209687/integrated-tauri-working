(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2992],{19412:(e,a,t)=>{"use strict";t.d(a,{i:()=>i});var r=t(95155),s=t(42744),n=t(26715),l=t(12115);function i(e){let{children:a}=e,[t]=(0,l.useState)(()=>new s.E);return(0,r.jsx)(n.Ht,{client:t,children:a})}},20676:(e,a,t)=>{Promise.resolve().then(t.bind(t,20773))},20773:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>_});var r=t(95155),s=t(12115),n=t(6874),l=t.n(n),i=t(66766),o=t(35695),c=t(27809),d=t(5424),u=t(28883),h=t(381),m=t(59434),x=t(30285),g=t(91394),f=t(38012),b=t(45493),j=t(60619),p=t(58485),v=t(46102);function y(e){var a,t,n,y;let{isCollapsed:k,onToggle:w}=e,N=(0,o.usePathname)(),{data:C}=(0,b.wV)(),z=null==C||null==(a=C.user)?void 0:a.id,{unreadCount:A,fetchUnreadCount:_}=(0,j.i)(),{activeStore:L}=(0,p.C)();(0,s.useEffect)(()=>{z&&_(z)},[z,_]);let S=[{name:"POS",href:"/cashier/pos",icon:c.A},{name:"Invoice",href:"/cashier/invoice",icon:d.A},{name:"Messages",href:"/cashier/message",icon:u.A,badge:A>0?A:void 0}],U={name:(null==C||null==(t=C.user)?void 0:t.name)||"Cashier",email:(null==C||null==(n=C.user)?void 0:n.email)||"cashier@pos.com",avatar:(null==C||null==(y=C.user)?void 0:y.image)||"/cashier.png"},E=async()=>{await (0,b.CI)({callbackUrl:"/auth"})};return(0,r.jsx)(v.Bc,{delayDuration:0,children:(0,r.jsxs)("aside",{className:(0,m.cn)("relative flex flex-col justify-between min-h-screen border-r border-gray-800/60 bg-linear-to-b from-gray-950 via-gray-900 to-gray-950 text-gray-200 transition-all duration-500 ease-in-out shadow-xl",k?"w-20":"w-64"),children:[(0,r.jsxs)("div",{className:"relative flex flex-col items-center border-b border-gray-800/60 pb-4 pt-6",children:[(0,r.jsx)(x.$,{variant:"ghost",size:"icon",onClick:w,className:(0,m.cn)("absolute -right-4 top-6 z-10 h-8 w-8 rounded-full bg-gray-700 text-white shadow-md hover:bg-primary transition-all duration-300",k?"rotate-180":""),children:(0,r.jsx)("svg",{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 18-6-6 6-6"})})}),(null==L?void 0:L.logo)?(0,r.jsx)(i.default,{src:L.logo,alt:"Store Logo",width:k?48:120,height:48,className:"object-contain brightness-125 transition-all duration-500 hover:scale-105 mt-2"}):(0,r.jsx)(h.A,{className:"h-8 w-8 text-primary mt-2"})]}),(0,r.jsx)("nav",{className:"flex-1 w-full overflow-y-auto mt-4 space-y-1 px-2 scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-gray-900",children:S.map(e=>{let a=N===e.href,t=(0,r.jsxs)(l(),{href:e.href,className:(0,m.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-200 group relative",a?"bg-primary text-primary-foreground shadow-lg":"hover:bg-gray-800/70 hover:text-white text-gray-400",k?"justify-center":""),children:[(0,r.jsx)(e.icon,{className:"h-5 w-5 shrink-0"}),!k&&(0,r.jsxs)("span",{className:"flex-1 flex justify-between items-center",children:[e.name,e.badge&&(0,r.jsx)("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center animate-pulse",children:e.badge})]})]},e.name);return k?(0,r.jsxs)(v.m_,{children:[(0,r.jsx)(v.k$,{asChild:!0,children:t}),(0,r.jsx)(v.ZI,{side:"right",children:e.name})]},e.name):t})}),(0,r.jsxs)("div",{className:(0,m.cn)("border-t border-gray-800/60 px-3 py-4 flex flex-col gap-3 bg-gray-950/80 backdrop-blur-sm",k?"items-center":""),children:[(0,r.jsx)(f.U,{}),(0,r.jsxs)(x.$,{variant:"ghost",className:(0,m.cn)("w-full flex items-center justify-start rounded-md px-3 py-2 hover:bg-gray-800/80 transition",k?"justify-center":""),onClick:E,children:[(0,r.jsxs)(g.eu,{className:(0,m.cn)("h-8 w-8",k?"mr-0":"mr-3"),children:[(0,r.jsx)(g.BK,{src:U.avatar,alt:U.name||""}),(0,r.jsx)(g.q5,{children:U.name?U.name.charAt(0):"C"})]}),!k&&(0,r.jsx)("span",{children:"Logout"})]})]})]})})}var k=t(19412),w=t(50014),N=t(51154);function C(e){var a;let{children:t,role:s}=e,{data:n,status:l}=(0,b.wV)();return"loading"===l?(0,r.jsx)("div",{className:"flex justify-center items-center h-screen w-screen bg-gray-50 dark:bg-gray-950",children:(0,r.jsx)(N.A,{className:"h-10 w-10 animate-spin text-gray-500"})}):(("unauthenticated"===l||(null==n||null==(a=n.user)?void 0:a.role)!==s)&&(0,o.redirect)("/auth"),(0,r.jsx)(r.Fragment,{children:t}))}var z=t(54416),A=t(74783);function _(e){let{children:a}=e,[t,n]=(0,s.useState)(!1),[l,i]=(0,s.useState)(!1),{fetchActiveStore:o}=(0,p.C)();(0,s.useEffect)(()=>{o()},[o]);let c=()=>i(e=>!e);return(0,r.jsx)(C,{role:"cashier",children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 relative",children:[(0,r.jsx)("div",{className:"fixed top-3 left-3 z-50 lg:hidden",children:(0,r.jsx)(x.$,{size:"icon",variant:"outline",className:"bg-white dark:bg-gray-900 shadow-md",onClick:c,children:l?(0,r.jsx)(z.A,{className:"h-5 w-5"}):(0,r.jsx)(A.A,{className:"h-5 w-5"})})}),(0,r.jsx)("aside",{className:(0,m.cn)("hidden lg:fixed lg:top-0 lg:left-0 lg:h-full lg:flex lg:flex-col transition-all duration-300 ease-in-out z-40",t?"lg:w-20":"lg:w-64"),children:(0,r.jsx)(y,{isCollapsed:t,onToggle:()=>n(e=>!e)})}),l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300",onClick:c}),(0,r.jsx)("aside",{className:(0,m.cn)("fixed top-0 left-0 h-full w-64 z-50 transform transition-transform duration-300 ease-in-out",l?"translate-x-0":"-translate-x-full"),children:(0,r.jsx)(y,{isCollapsed:!1,onToggle:c})})]}),(0,r.jsx)("main",{className:(0,m.cn)("min-h-screen transition-all duration-300 ease-in-out flex flex-col p-4",t?"lg:ml-20":"lg:ml-64"),children:(0,r.jsx)(k.i,{children:a})}),(0,r.jsx)(w.PrintPreview,{})]})})}},27809:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(19946).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},38012:(e,a,t)=>{"use strict";t.d(a,{U:()=>d});var r=t(95155);t(12115);var s=t(62098),n=t(93509),l=t(51362),i=t(4884),o=t(59434);function c(e){let{className:a,...t}=e;return(0,r.jsx)(i.bL,{"data-slot":"switch",className:(0,o.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:(0,r.jsx)(i.zi,{"data-slot":"switch-thumb",className:(0,o.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function d(){let{theme:e,setTheme:a}=(0,l.D)();return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(s.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,r.jsx)(c,{checked:"dark"===e,onCheckedChange:()=>{a("dark"===e?"light":"dark")},"aria-label":"Toggle dark mode"}),(0,r.jsx)(n.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}},46102:(e,a,t)=>{"use strict";t.d(a,{Bc:()=>l,ZI:()=>c,k$:()=>o,m_:()=>i});var r=t(95155);t(12115);var s=t(78082),n=t(59434);function l(e){let{delayDuration:a=0,...t}=e;return(0,r.jsx)(s.Kq,{"data-slot":"tooltip-provider",delayDuration:a,...t})}function i(e){let{...a}=e;return(0,r.jsx)(l,{children:(0,r.jsx)(s.bL,{"data-slot":"tooltip",...a})})}function o(e){let{...a}=e;return(0,r.jsx)(s.l9,{"data-slot":"tooltip-trigger",...a})}function c(e){let{className:a,sideOffset:t=0,children:l,...i}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{"data-slot":"tooltip-content",sideOffset:t,className:(0,n.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",a),...i,children:[l,(0,r.jsx)(s.i3,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},60619:(e,a,t)=>{"use strict";t.d(a,{i:()=>l});var r=t(65453),s=t(34477);let n=(0,s.createServerReference)("7f0320933b8838e692e871f52058ea99a7665d8347",s.callServer,void 0,s.findSourceMapURL,"getTotalUnreadMessages"),l=(0,r.v)(e=>({unreadCount:0,fetchUnreadCount:async a=>{let t=await n(a);t.success&&e({unreadCount:t.count})}}))},91394:(e,a,t)=>{"use strict";t.d(a,{BK:()=>i,eu:()=>l,q5:()=>o});var r=t(95155);t(12115);var s=t(78513),n=t(59434);function l(e){let{className:a,...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"avatar",className:(0,n.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...t})}function i(e){let{className:a,...t}=e;return(0,r.jsx)(s._V,{"data-slot":"avatar-image",className:(0,n.cn)("aspect-square size-full",a),...t})}function o(e){let{className:a,...t}=e;return(0,r.jsx)(s.H4,{"data-slot":"avatar-fallback",className:(0,n.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...t})}}},e=>{var a=a=>e(e.s=a);e.O(0,[2848,7849,5152,2898,6874,7895,5821,6331,5493,1931,6619,14,8441,1684,7358],()=>a(20676)),_N_E=e.O()}]);