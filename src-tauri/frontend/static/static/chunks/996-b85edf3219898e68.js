(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[996],{19946:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(12115);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),s=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:c="",children:u,iconNode:v,...f}=e;return(0,n.createElement)("svg",{ref:t,...d,width:i,height:i,stroke:r,strokeWidth:s?24*Number(a)/Number(i):a,className:o("lucide",c),...!u&&!l(f)&&{"aria-hidden":"true"},...f},[...v.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,n.forwardRef)((r,a)=>{let{className:l,...d}=r;return(0,n.createElement)(c,{ref:a,iconNode:t,className:o("lucide-".concat(i(s(e))),"lucide-".concat(e),l),...d})});return r.displayName=s(e),r}},26126:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var n=r(95155);r(12115);var i=r(99708),a=r(74466),s=r(59434);let o=(0,a.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,asChild:a=!1,...l}=e,d=a?i.DX:"span";return(0,n.jsx)(d,{"data-slot":"badge",className:(0,s.cn)(o({variant:r}),t),...l})}},28905:(e,t,r)=>{"use strict";r.d(t,{C:()=>s});var n=r(12115),i=r(6101),a=r(52712),s=e=>{let{present:t,children:r}=e,s=function(e){var t,r;let[i,s]=n.useState(),l=n.useRef(null),d=n.useRef(e),c=n.useRef("none"),[u,v]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},n.useReducer((e,t)=>{let n=r[e][t];return null!=n?n:e},t));return n.useEffect(()=>{let e=o(l.current);c.current="mounted"===u?e:"none"},[u]),(0,a.N)(()=>{let t=l.current,r=d.current;if(r!==e){let n=c.current,i=o(t);e?v("MOUNT"):"none"===i||(null==t?void 0:t.display)==="none"?v("UNMOUNT"):r&&n!==i?v("ANIMATION_OUT"):v("UNMOUNT"),d.current=e}},[e,v]),(0,a.N)(()=>{if(i){var e;let t,r=null!=(e=i.ownerDocument.defaultView)?e:window,n=e=>{let n=o(l.current).includes(CSS.escape(e.animationName));if(e.target===i&&n&&(v("ANIMATION_END"),!d.current)){let e=i.style.animationFillMode;i.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=e)})}},a=e=>{e.target===i&&(c.current=o(l.current))};return i.addEventListener("animationstart",a),i.addEventListener("animationcancel",n),i.addEventListener("animationend",n),()=>{r.clearTimeout(t),i.removeEventListener("animationstart",a),i.removeEventListener("animationcancel",n),i.removeEventListener("animationend",n)}}v("ANIMATION_END")},[i,v]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:n.useCallback(e=>{l.current=e?getComputedStyle(e):null,s(e)},[])}}(t),l="function"==typeof r?r({present:s.isPresent}):n.Children.only(r),d=(0,i.s)(s.ref,function(e){var t,r;let n=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(i=(n=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get)&&"isReactWarning"in n&&n.isReactWarning)?e.props.ref:e.props.ref||e.ref}(l));return"function"==typeof r||s.isPresent?n.cloneElement(l,{ref:d}):null};function o(e){return(null==e?void 0:e.animationName)||"none"}s.displayName="Presence"},30051:(e,t,r)=>{"use strict";r.d(t,{W:()=>n});let n=(0,r(65453).v)(e=>({isModalOpen:!1,invoiceData:null,openModal:t=>e({isModalOpen:!0,invoiceData:t}),closeModal:()=>e({isModalOpen:!1,invoiceData:null})}))},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,r:()=>o});var n=r(95155);r(12115);var i=r(99708),a=r(74466),s=r(59434);let o=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:a,asChild:l=!1,...d}=e,c=l?i.DX:"button";return(0,n.jsx)(c,{"data-slot":"button",className:(0,s.cn)(o({variant:r,size:a,className:t})),...d})}},34477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return n.callServer},createServerReference:function(){return a},findSourceMapURL:function(){return i.findSourceMapURL}});let n=r(53806),i=r(31818),a=r(34979).createServerReference},46102:(e,t,r)=>{"use strict";r.d(t,{Bc:()=>s,ZI:()=>d,k$:()=>l,m_:()=>o});var n=r(95155);r(12115);var i=r(89613),a=r(59434);function s(e){let{delayDuration:t=0,...r}=e;return(0,n.jsx)(i.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function o(e){let{...t}=e;return(0,n.jsx)(s,{children:(0,n.jsx)(i.bL,{"data-slot":"tooltip",...t})})}function l(e){let{...t}=e;return(0,n.jsx)(i.l9,{"data-slot":"tooltip-trigger",...t})}function d(e){let{className:t,sideOffset:r=0,children:s,...o}=e;return(0,n.jsx)(i.ZL,{children:(0,n.jsxs)(i.UC,{"data-slot":"tooltip-content",sideOffset:r,className:(0,a.cn)("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...o,children:[s,(0,n.jsx)(i.i3,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}},51154:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},54861:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(19946).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var n=r(52596),i=r(39688);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,n.$)(t))}},62523:(e,t,r)=>{"use strict";r.d(t,{p:()=>a});var n=r(95155);r(12115);var i=r(59434);function a(e){let{className:t,type:r,...a}=e;return(0,n.jsx)("input",{type:r,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...a})}},63655:(e,t,r)=>{"use strict";r.d(t,{hO:()=>l,sG:()=>o});var n=r(12115),i=r(47650),a=r(99708),s=r(95155),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,a.TL)(`Primitive.${t}`),i=n.forwardRef((e,n)=>{let{asChild:i,...a}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(i?r:t,{...a,ref:n})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function l(e,t){e&&i.flushSync(()=>e.dispatchEvent(t))}},72897:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var n=r(12115);function i(e,t){let[r,i]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let r=setTimeout(()=>i(e),t||500);return()=>{clearTimeout(r)}},[e,t]),r}},85127:(e,t,r)=>{"use strict";r.d(t,{A0:()=>s,BF:()=>o,Hj:()=>l,XI:()=>a,nA:()=>c,nd:()=>d});var n=r(95155);r(12115);var i=r(59434);function a(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,i.cn)("w-full caption-bottom text-sm",t),...r})})}function s(e){let{className:t,...r}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,i.cn)("[&_tr]:border-b",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,i.cn)("[&_tr:last-child]:border-0",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,i.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...r})}function d(e){let{className:t,...r}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,i.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 *:[[role=checkbox]]:translate-y-0.5",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,i.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 *:[[role=checkbox]]:translate-y-0.5",t),...r})}},90983:(e,t,r)=>{"use strict";r.d(t,{InvoiceTable:()=>j});var n=r(95155),i=r(12115),a=r(72897),s=r(65453),o=r(34477);let l=(0,o.createServerReference)("409dcd9bba19db35420ed0eb17a382eb5278f0d05e",o.callServer,void 0,o.findSourceMapURL,"cancelInvoice");var d=r(56671);let c=(0,s.v)(e=>({invoices:[],setInvoices:t=>e({invoices:t}),cancelInvoiceAction:async t=>{let r=await l(t);if(r.success&&r.data){d.oR.success("Invoice has been cancelled.");let n=r.data;e(e=>({invoices:e.invoices.map(e=>e._id===t?{...e,...n}:e)}))}else d.oR.error(r.message)}}));var u=r(30051),v=r(30285),f=r(85127),m=r(62523);let h=(0,r(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=r(51154),b=r(54861),x=r(26126),g=r(59434),y=r(46102);function j(e){let{initialInvoices:t}=e,{invoices:r,setInvoices:s,cancelInvoiceAction:o}=c(),{openModal:l}=(0,u.W)(),[d,j]=(0,i.useTransition)(),[w,N]=(0,i.useState)(null),[k,A]=(0,i.useState)(""),M=(0,a.d)(k,300);(0,i.useEffect)(()=>{s(t)},[t,s]);let C=r.filter(e=>{var t,r,n,i,a;let s=M.toLowerCase(),o=null!=(t=e.customer)?t:null,l=null!=(r=e.billedBy)?r:null,d=o&&"object"==typeof o&&"name"in o&&null!=(n=o.name)?n:"",c=o&&"object"==typeof o&&"phone"in o&&null!=(i=o.phone)?i:"",u=l&&"object"==typeof l&&"name"in l&&null!=(a=l.name)?a:"";return(e.invoiceNumber||"").toLowerCase().includes(s)||d.toLowerCase().includes(s)||c.toLowerCase().includes(s)||u.toLowerCase().includes(s)}),_=e=>{window.confirm("Are you sure you want to cancel this invoice? This cannot be undone.")&&(N(e),j(()=>{o(e).finally(()=>N(null))}))},O=e=>{l(e)};return(0,n.jsx)(y.Bc,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(m.p,{placeholder:"Search by Invoice No, Customer Name, Mobile, Billed By...",value:k,onChange:e=>A(e.target.value),className:"max-w-md"}),(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(f.XI,{children:[(0,n.jsx)(f.A0,{children:(0,n.jsxs)(f.Hj,{children:[(0,n.jsx)(f.nd,{className:"w-20",children:"S/No"}),(0,n.jsx)(f.nd,{children:"Invoice No"}),(0,n.jsx)(f.nd,{children:"Customer Name"}),(0,n.jsx)(f.nd,{children:"Mobile"}),(0,n.jsx)(f.nd,{children:"Billed By"}),(0,n.jsx)(f.nd,{children:"Status"}),(0,n.jsx)(f.nd,{className:"text-right w-[120px]",children:"Actions"})]})}),(0,n.jsx)(f.BF,{children:C.length>0?C.map((e,t)=>{var r,i,a;return(0,n.jsxs)(f.Hj,{className:(0,g.cn)("cancelled"===e.status&&"text-gray-500 line-through"),children:[(0,n.jsx)(f.nA,{children:t+1}),(0,n.jsx)(f.nA,{className:"font-medium",children:e.invoiceNumber}),(0,n.jsx)(f.nA,{children:e.customer&&"object"==typeof e.customer&&"name"in e.customer&&null!=(r=e.customer.name)?r:""}),(0,n.jsx)(f.nA,{children:e.customer&&"object"==typeof e.customer&&"phone"in e.customer&&null!=(i=e.customer.phone)?i:""}),(0,n.jsx)(f.nA,{children:e.billedBy&&"object"==typeof e.billedBy&&"name"in e.billedBy&&null!=(a=e.billedBy.name)?a:""}),(0,n.jsx)(f.nA,{children:(0,n.jsx)(x.E,{variant:"cancelled"===e.status?"destructive":"default",children:e.status})}),(0,n.jsx)(f.nA,{className:"text-right",children:(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,n.jsxs)(y.m_,{children:[(0,n.jsx)(y.k$,{asChild:!0,children:(0,n.jsx)(v.$,{variant:"outline",size:"icon",onClick:()=>O(e),children:(0,n.jsx)(h,{className:"h-4 w-4"})})}),(0,n.jsx)(y.ZI,{children:(0,n.jsx)("p",{children:"View Invoice"})})]}),(0,n.jsxs)(y.m_,{children:[(0,n.jsx)(y.k$,{asChild:!0,children:(0,n.jsx)(v.$,{variant:"destructive",size:"icon",onClick:()=>_(e._id),disabled:d&&w===e._id||"cancelled"===e.status,children:d&&w===e._id?(0,n.jsx)(p.A,{className:"h-4 w-4 animate-spin"}):(0,n.jsx)(b.A,{className:"h-4 w-4"})})}),(0,n.jsx)(y.ZI,{children:(0,n.jsx)("p",{children:"Cancel Invoice"})})]})]})})]},e._id)}):(0,n.jsx)(f.Hj,{children:(0,n.jsx)(f.nA,{colSpan:7,className:"h-24 text-center",children:"No invoices found."})})})]})})]})})}},96852:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.bind(r,90983))}}]);